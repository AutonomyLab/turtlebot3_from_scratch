<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROS Navigation Stack: nuslam::EKF Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROS Navigation Stack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>nuslam</b></li><li class="navelem"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html">EKF</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d3/dbb/classnuslam_1_1EKF-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">nuslam::EKF Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>handles model propagation for <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> SLAM  
 <a href="../../d8/d86/classnuslam_1_1EKF.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d5/d5e/ekf_8hpp_source.html">ekf.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a459ca7cecbb8457d805da0b916063d57"><td class="memItemLeft" align="right" valign="top"><a id="a459ca7cecbb8457d805da0b916063d57"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a459ca7cecbb8457d805da0b916063d57">EKF</a> ()</td></tr>
<tr class="memdesc:a459ca7cecbb8457d805da0b916063d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">the default constructor creates a <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> with zero-initialized pose and no landmarks Start with guess of robot state (0,0,0) with zero covariance for robot state, indicating full confidence in initial state, and infinite covariance for ladmarks state, indicating we know nothing about them. <br /></td></tr>
<tr class="separator:a459ca7cecbb8457d805da0b916063d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac47ec7f4a91c3ed3f6b8fba4167354c9"><td class="memItemLeft" align="right" valign="top"><a id="ac47ec7f4a91c3ed3f6b8fba4167354c9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#ac47ec7f4a91c3ed3f6b8fba4167354c9">EKF</a> (const <a class="el" href="../../d9/d3f/structrigid2d_1_1Pose2D.html">Pose2D</a> &amp;robot_state_, const std::vector&lt; <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> &gt; &amp;map_state_, const <a class="el" href="../../d9/d3f/structrigid2d_1_1Pose2D.html">Pose2D</a> &amp;xyt_noise_var, const <a class="el" href="../../d1/d23/structnuslam_1_1RangeBear.html">RangeBear</a> &amp;rb_noise_var_, const double &amp;max_range_, double mahalanobis_lower_, double mahalanobis_upper_)</td></tr>
<tr class="memdesc:ac47ec7f4a91c3ed3f6b8fba4167354c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">the default constructor creates a <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> with user-defined number of landmarks Start with guess of robot state (0,0,0) with zero covariance for robot state, indicating full confidence in initial state, and infinite covariance for ladmarks state, indicating we know nothing about them. <br /></td></tr>
<tr class="separator:ac47ec7f4a91c3ed3f6b8fba4167354c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6eddda5abffd650b98ce947263d0ea8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#ad6eddda5abffd650b98ce947263d0ea8">predict</a> (const <a class="el" href="../../de/d9f/classrigid2d_1_1Twist2D.html">Twist2D</a> &amp;twist)</td></tr>
<tr class="memdesc:ad6eddda5abffd650b98ce947263d0ea8"><td class="mdescLeft">&#160;</td><td class="mdescRight">forward-propagate the nonlinear motion model to get an estimate (prediction, and, using Taylor-Series expantion, get a linearized state transition model, which is used to propagate uncertainty.  <a href="#ad6eddda5abffd650b98ce947263d0ea8">More...</a><br /></td></tr>
<tr class="separator:ad6eddda5abffd650b98ce947263d0ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b063065f405856d85fe048d736c68a"><td class="memItemLeft" align="right" valign="top">Eigen::MatrixXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a51b063065f405856d85fe048d736c68a">inv_msr_model</a> (const int &amp;j)</td></tr>
<tr class="memdesc:a51b063065f405856d85fe048d736c68a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the Measurement Jacobian.  <a href="#a51b063065f405856d85fe048d736c68a">More...</a><br /></td></tr>
<tr class="separator:a51b063065f405856d85fe048d736c68a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45c8b3af13b612d8517ad0716166ed6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#aa45c8b3af13b612d8517ad0716166ed6">msr_update</a> (const std::vector&lt; <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> &gt; &amp;measurements_)</td></tr>
<tr class="memdesc:aa45c8b3af13b612d8517ad0716166ed6"><td class="mdescLeft">&#160;</td><td class="mdescRight">incorporate sequential landmark measurements to perform a correction of our predicted estimate, then, update the <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> parameters for the next ieration. Also initializes new landmarks  <a href="#aa45c8b3af13b612d8517ad0716166ed6">More...</a><br /></td></tr>
<tr class="separator:aa45c8b3af13b612d8517ad0716166ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf0259a033ba671961ea06d1737ee3c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a6cf0259a033ba671961ea06d1737ee3c">mahalanobis_test</a> (const Eigen::VectorXd &amp;z)</td></tr>
<tr class="memdesc:a6cf0259a033ba671961ea06d1737ee3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">perform the mahalanobis test and return vector of successful candidates with corresponding indeces mapped to map_state vector  <a href="#a6cf0259a033ba671961ea06d1737ee3c">More...</a><br /></td></tr>
<tr class="separator:a6cf0259a033ba671961ea06d1737ee3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5292c5dd543b8d58edf51f7addfd7e09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d3f/structrigid2d_1_1Pose2D.html">Pose2D</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a5292c5dd543b8d58edf51f7addfd7e09">return_pose</a> ()</td></tr>
<tr class="memdesc:a5292c5dd543b8d58edf51f7addfd7e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">computes and returns Nearest Semi-Positive Definite Matrix  <a href="#a5292c5dd543b8d58edf51f7addfd7e09">More...</a><br /></td></tr>
<tr class="separator:a5292c5dd543b8d58edf51f7addfd7e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f461c60e11f23e99e04caeb76c9decc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a9f461c60e11f23e99e04caeb76c9decc">return_map</a> ()</td></tr>
<tr class="memdesc:a9f461c60e11f23e99e04caeb76c9decc"><td class="mdescLeft">&#160;</td><td class="mdescRight">return current map state belief  <a href="#a9f461c60e11f23e99e04caeb76c9decc">More...</a><br /></td></tr>
<tr class="separator:a9f461c60e11f23e99e04caeb76c9decc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d5e78faa84e6a3d71197fff06d2503"><td class="memItemLeft" align="right" valign="top"><a id="a37d5e78faa84e6a3d71197fff06d2503"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d86/classnuslam_1_1EKF.html#a37d5e78faa84e6a3d71197fff06d2503">reset_pose</a> (const <a class="el" href="../../d9/d3f/structrigid2d_1_1Pose2D.html">Pose2D</a> &amp;pose)</td></tr>
<tr class="memdesc:a37d5e78faa84e6a3d71197fff06d2503"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset internal pose <br /></td></tr>
<tr class="separator:a37d5e78faa84e6a3d71197fff06d2503"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>handles model propagation for <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> SLAM </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a51b063065f405856d85fe048d736c68a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b063065f405856d85fe048d736c68a">&#9670;&nbsp;</a></span>inv_msr_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::MatrixXd nuslam::EKF::inv_msr_model </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>j</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the Measurement Jacobian. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">j</td><td>index of assessed landmark </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>H matrix (inverse measurement model) </dd></dl>

</div>
</div>
<a id="a6cf0259a033ba671961ea06d1737ee3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf0259a033ba671961ea06d1737ee3c">&#9670;&nbsp;</a></span>mahalanobis_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; nuslam::EKF::mahalanobis_test </td>
          <td>(</td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>perform the mahalanobis test and return vector of successful candidates with corresponding indeces mapped to map_state vector </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measurements</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector of Point(s) which have fallen outside of the mahalanobis deadband </dd></dl>

</div>
</div>
<a id="aa45c8b3af13b612d8517ad0716166ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45c8b3af13b612d8517ad0716166ed6">&#9670;&nbsp;</a></span>msr_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nuslam::EKF::msr_update </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>measurements_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>incorporate sequential landmark measurements to perform a correction of our predicted estimate, then, update the <a class="el" href="../../d8/d86/classnuslam_1_1EKF.html" title="handles model propagation for EKF SLAM ">EKF</a> parameters for the next ieration. Also initializes new landmarks </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vector</td><td>of <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> struct containing relative recorded landmark coordinates </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6eddda5abffd650b98ce947263d0ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6eddda5abffd650b98ce947263d0ea8">&#9670;&nbsp;</a></span>predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nuslam::EKF::predict </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d9f/classrigid2d_1_1Twist2D.html">Twist2D</a> &amp;&#160;</td>
          <td class="paramname"><em>twist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>forward-propagate the nonlinear motion model to get an estimate (prediction, and, using Taylor-Series expantion, get a linearized state transition model, which is used to propagate uncertainty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Twist2D</td><td>containing linear and angular velocity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f461c60e11f23e99e04caeb76c9decc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f461c60e11f23e99e04caeb76c9decc">&#9670;&nbsp;</a></span>return_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d8/d3f/structnuslam_1_1Point.html">Point</a> &gt; nuslam::EKF::return_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return current map state belief </p>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;Point&gt; </dd></dl>

</div>
</div>
<a id="a5292c5dd543b8d58edf51f7addfd7e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5292c5dd543b8d58edf51f7addfd7e09">&#9670;&nbsp;</a></span>return_pose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d3f/structrigid2d_1_1Pose2D.html">Pose2D</a> nuslam::EKF::return_pose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>computes and returns Nearest Semi-Positive Definite Matrix </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Eigen::MatrixXd</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Eigen::MatrixXd return current pose belief </dd>
<dd>
Pose2D </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nuslam/include/nuslam/<a class="el" href="../../d5/d5e/ekf_8hpp_source.html">ekf.hpp</a></li>
<li>nuslam/src/nuslam/ekf.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
